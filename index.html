<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dynamic M3U Generator</title>
</head>
<body>
    <p>请输入部署设备的 IP 地址和端口，会自动生成 M3U 文件：</p>
    <input type="text" id="ipInput" placeholder="例如: 192.168.1.2">
    <input type="text" id="portInput" placeholder="例如: 35455">
    <button onclick="submitIpAndPort()">提交</button>
    <p>请将以下内容复制到播放器，或下载 M3U 文件：</p>
    <button onclick="copyToClipboard()">全部复制</button>
    <a id="downloadLink" style="display: none;" download="playlist.m3u">
        <button>下载 M3U 文件</button>
    </a>
    <pre id="result">生成中，请稍候...</pre>
    <script>
        const baseM3uContent = `#EXTM3U x-tvg-url="https://live.fanmingming.com/e.xml"
#EXTINF:-1 tvg-name="CCTV1" tvg-logo="https://live.fanmingming.com/tv/CCTV1.png" group-title="央视频道",CCTV-1 综合
http://192.168.1.2:35455/gaoma/cctv1.m3u8
#EXTINF:-1 tvg-name="CCTV2" tvg-logo="https://live.fanmingming.com/tv/CCTV2.png" group-title="央视频道",CCTV-2 财经
http://192.168.1.2:35455/gaoma/cctv2.m3u8
#EXTINF:-1 tvg-name="CCTV3" tvg-logo="https://live.fanmingming.com/tv/CCTV3.png" group-title="央视频道",CCTV-3 综艺
http://192.168.1.2:35455/gaoma/cctv3.m3u8
#EXTINF:-1 tvg-name="CCTV4" tvg-logo="https://live.fanmingming.com/tv/CCTV4.png" group-title="央视频道",CCTV-4 中文国际
http://192.168.1.2:35455/gaoma/cctv4.m3u8
#EXTINF:-1 tvg-name="CCTV5" tvg-logo="https://live.fanmingming.com/tv/CCTV5.png" group-title="央视频道",CCTV-5 体育
http://192.168.1.2:35455/gaoma/cctv5.m3u8
#EXTINF:-1 tvg-name="CCTV5+" tvg-logo="https://live.fanmingming.com/tv/CCTV5+.png" group-title="央视频道",CCTV-5+ 体育赛事
http://192.168.1.2:35455/gaoma/cctv5p.m3u8
#EXTINF:-1 tvg-name="CCTV6" tvg-logo="https://live.fanmingming.com/tv/CCTV6.png" group-title="央视频道",CCTV-6 电影
http://192.168.1.2:35455/bptv/10000100000000050000000003870749.m3u8
#EXTINF:-1 tvg-name="CCTV7" tvg-logo="https://live.fanmingming.com/tv/CCTV7.png" group-title="央视频道",CCTV-7 国防军事
http://192.168.1.2:35455/gaoma/cctv7.m3u8
#EXTINF:-1 tvg-name="CCTV8" tvg-logo="https://live.fanmingming.com/tv/CCTV8.png" group-title="央视频道",CCTV-8 电视剧
http://192.168.1.2:35455/gaoma/cctv8.m3u8
#EXTINF:-1 tvg-name="CCTV9" tvg-logo="https://live.fanmingming.com/tv/CCTV9.png" group-title="央视频道",CCTV-9 纪录
http://192.168.1.2:35455/gaoma/cctv9.m3u8
#EXTINF:-1 tvg-name="CCTV10" tvg-logo="https://live.fanmingming.com/tv/CCTV10.png" group-title="央视频道",CCTV-10 科教
http://192.168.1.2:35455/gaoma/cctv10.m3u8
#EXTINF:-1 tvg-name="CCTV11" tvg-logo="https://live.fanmingming.com/tv/CCTV11.png" group-title="央视频道",CCTV-11 戏曲
http://192.168.1.2:35455/gaoma/cctv11.m3u8
#EXTINF:-1 tvg-name="CCTV12" tvg-logo="https://live.fanmingming.com/tv/CCTV12.png" group-title="央视频道",CCTV-12 社会与法
http://192.168.1.2:35455/gaoma/cctv12.m3u8
#EXTINF:-1 tvg-name="CCTV13" tvg-logo="https://live.fanmingming.com/tv/CCTV13.png" group-title="央视频道",CCTV-13 新闻
http://192.168.1.2:35455/gaoma/cctv13.m3u8
#EXTINF:-1 tvg-name="CCTV14" tvg-logo="https://live.fanmingming.com/tv/CCTV14.png" group-title="央视频道",CCTV-14 少儿
http://192.168.1.2:35455/gaoma/cctv14.m3u8
#EXTINF:-1 tvg-name="CCTV15" tvg-logo="https://live.fanmingming.com/tv/CCTV15.png" group-title="央视频道",CCTV-15 音乐
http://192.168.1.2:35455/gaoma/cctv15.m3u8
#EXTINF:-1 tvg-name="CCTV16" tvg-logo="https://live.fanmingming.com/tv/CCTV16.png" group-title="央视频道",CCTV-16 奥林匹克
http://192.168.1.2:35455/gaoma/cctv16.m3u8
#EXTINF:-1 tvg-name="CCTV17" tvg-logo="https://live.fanmingming.com/tv/CCTV17.png" group-title="央视频道",CCTV-17 农业农村
http://192.168.1.2:35455/gaoma/cctv17.m3u8
#EXTINF:-1 tvg-name="CCTV怀旧剧场" tvg-logo="https://live.fanmingming.com/tv/怀旧剧场.png" group-title="央视频道",CCTV怀旧剧场
http://183.165.36.155:4022/rtp/238.1.79.61:4624
#EXTINF:-1 tvg-name="CGTN" tvg-logo="https://live.fanmingming.com/tv/CGTN.png" group-title="央视频道",CGTN英语
http://192.168.1.2:35455/gaoma/cgtnen.m3u8
#EXTINF:-1 tvg-name="CGTN纪录" tvg-logo="https://live.fanmingming.com/tv/CGTN纪录.png" group-title="央视频道",CGTN记录
http://192.168.1.2:35455/gaoma/cgtndoc.m3u8
#EXTINF:-1 tvg-name="CGTN俄语" tvg-logo="https://live.fanmingming.com/tv/CGTN俄语.png" group-title="央视频道",CGTN俄语
http://192.168.1.2:35455/gaoma/cgtnru.m3u8
#EXTINF:-1 tvg-name="CGTN法语" tvg-logo="https://live.fanmingming.com/tv/CGTN法语.png" group-title="央视频道",CGTN法语
http://192.168.1.2:35455/gaoma/cgtnfr.m3u8
#EXTINF:-1 tvg-name="CGTN西语" tvg-logo="https://live.fanmingming.com/tv/CGTN西语.png" group-title="央视频道",CGTN西语
http://192.168.1.2:35455/gaoma/cgtnsp.m3u8
#EXTINF:-1 tvg-name="CGTN阿语" tvg-logo="https://live.fanmingming.com/tv/CGTN阿语.png" group-title="央视频道",CGTN阿语
http://192.168.1.2:35455/gaoma/cgtnar.m3u8
#EXTINF:-1 tvg-name="北京卫视" tvg-logo="https://live.fanmingming.com/tv/北京卫视.png" group-title="卫视频道",北京卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003870776.m3u8
#EXTINF:-1 tvg-name="湖南卫视" tvg-logo="https://live.fanmingming.com/tv/湖南卫视.png" group-title="卫视频道",湖南卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873458.m3u8
#EXTINF:-1 tvg-name="东方卫视" tvg-logo="https://live.fanmingming.com/tv/东方卫视.png" group-title="卫视频道",东方卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873462.m3u8
#EXTINF:-1 tvg-name="天津卫视" tvg-logo="https://live.fanmingming.com/tv/天津卫视.png" group-title="卫视频道",天津卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873466.m3u8
#EXTINF:-1 tvg-name="安徽卫视" tvg-logo="https://live.fanmingming.com/tv/安徽卫视.png" group-title="卫视频道",安徽卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873469.m3u8
#EXTINF:-1 tvg-name="深圳卫视" tvg-logo="https://live.fanmingming.com/tv/深圳卫视.png" group-title="卫视频道",深圳卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873474.m3u8
#EXTINF:-1 tvg-name="广东卫视" tvg-logo="https://live.fanmingming.com/tv/广东卫视.png" group-title="卫视频道",广东卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873459.m3u8
#EXTINF:-1 tvg-name="广西卫视" tvg-logo="https://live.fanmingming.com/tv/广西卫视.png" group-title="卫视频道",广西卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887394.m3u8
#EXTINF:-1 tvg-name="江苏卫视" tvg-logo="https://live.fanmingming.com/tv/江苏卫视.png" group-title="卫视频道",江苏卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873461.m3u8
#EXTINF:-1 tvg-name="江西卫视" tvg-logo="https://live.fanmingming.com/tv/江西卫视.png" group-title="卫视频道",江西卫视
http://192.168.1.2:35455/bptv/10000100000000050000000004796511.m3u8
#EXTINF:-1 tvg-name="河北卫视" tvg-logo="https://live.fanmingming.com/tv/河北卫视.png" group-title="卫视频道",河北卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873460.m3u8
#EXTINF:-1 tvg-name="河南卫视" tvg-logo="https://live.fanmingming.com/tv/河南卫视.png" group-title="卫视频道",河南卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887270.m3u8
#EXTINF:-1 tvg-name="浙江卫视" tvg-logo="https://live.fanmingming.com/tv/浙江卫视.png" group-title="卫视频道",浙江卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873464.m3u8
#EXTINF:-1 tvg-name="湖北卫视" tvg-logo="https://live.fanmingming.com/tv/湖北卫视.png" group-title="卫视频道",湖北卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873465.m3u8
#EXTINF:-1 tvg-name="山东卫视" tvg-logo="https://live.fanmingming.com/tv/山东卫视.png" group-title="卫视频道",山东卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873467.m3u8
#EXTINF:-1 tvg-name="山西卫视" tvg-logo="https://live.fanmingming.com/tv/山西卫视.png" group-title="卫视频道",山西卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887413.m3u8
#EXTINF:-1 tvg-name="东南卫视" tvg-logo="https://live.fanmingming.com/tv/东南卫视.png" group-title="卫视频道",东南卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873473.m3u8
#EXTINF:-1 tvg-name="四川卫视" tvg-logo="https://live.fanmingming.com/tv/四川卫视.png" group-title="卫视频道",四川卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887274.m3u8
#EXTINF:-1 tvg-name="贵州卫视" tvg-logo="https://live.fanmingming.com/tv/贵州卫视.png" group-title="卫视频道",贵州卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873471.m3u8
#EXTINF:-1 tvg-name="辽宁卫视" tvg-logo="https://live.fanmingming.com/tv/辽宁卫视.png" group-title="卫视频道",辽宁卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873468.m3u8
#EXTINF:-1 tvg-name="重庆卫视" tvg-logo="https://live.fanmingming.com/tv/重庆卫视.png" group-title="卫视频道",重庆卫视
http://192.168.1.2:35455/bptv/10000100000000050000000004796458.m3u8
#EXTINF:-1 tvg-name="黑龙江卫视" tvg-logo="https://live.fanmingming.com/tv/黑龙江卫视.png" group-title="卫视频道",黑龙江卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003873470.m3u8
#EXTINF:-1 tvg-name="内蒙古卫视" tvg-logo="https://live.fanmingming.com/tv/内蒙古卫视.png" group-title="卫视频道",内蒙古卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887427.m3u8
#EXTINF:-1 tvg-name="宁夏卫视" tvg-logo="https://live.fanmingming.com/tv/宁夏卫视.png" group-title="卫视频道",宁夏卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887433.m3u8
#EXTINF:-1 tvg-name="陕西卫视" tvg-logo="https://live.fanmingming.com/tv/陕西卫视.png" group-title="卫视频道",陕西卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887404.m3u8
#EXTINF:-1 tvg-name="吉林卫视" tvg-logo="https://live.fanmingming.com/tv/吉林卫视.png" group-title="卫视频道",吉林卫视
http://192.168.1.2:35455/bptv/10000100000000050000000004972569.m3u8
#EXTINF:-1 tvg-name="甘肃卫视" tvg-logo="https://live.fanmingming.com/tv/甘肃卫视.png" group-title="卫视频道",甘肃卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887450.m3u8
#EXTINF:-1 tvg-name="云南卫视" tvg-logo="https://live.fanmingming.com/tv/云南卫视.png" group-title="卫视频道",云南卫视
http://192.168.1.2:35455/itv/5000000011000031120.m3u8?cdn=bestzb
#EXTINF:-1 tvg-name="三沙卫视" tvg-logo="https://live.fanmingming.com/tv/三沙卫视.png" group-title="卫视频道",三沙卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887452.m3u8
#EXTINF:-1 tvg-name="青海卫视" tvg-logo="https://live.fanmingming.com/tv/青海卫视.png" group-title="卫视频道",青海卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887430.m3u8
#EXTINF:-1 tvg-name="新疆卫视" tvg-logo="https://live.fanmingming.com/tv/新疆卫视.png" group-title="卫视频道",新疆卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887448.m3u8
#EXTINF:-1 tvg-name="西藏卫视" tvg-logo="https://live.fanmingming.com/tv/西藏卫视.png" group-title="卫视频道",西藏卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887434.m3u8
#EXTINF:-1 tvg-name="兵团卫视" tvg-logo="https://live.fanmingming.com/tv/兵团卫视.png" group-title="卫视频道",兵团卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887456.m3u8
#EXTINF:-1 tvg-name="厦门卫视" tvg-logo="https://live.fanmingming.com/tv/厦门卫视.png" group-title="卫视频道",厦门卫视
http://192.168.1.2:35455/bptv/10000100000000050000000003887454.m3u8
#EXTINF:-1 tvg-name="重温经典" tvg-logo="https://live.fanmingming.com/tv/重温经典.png" group-title="数字频道",重温经典
http://192.168.1.2:35455/bptv/10000100000000050000000003887494.m3u8
#EXTINF:-1 tvg-name="北京IPTV4K" tvg-logo="https://live.fanmingming.com/tv/北京IPTV4K.png" group-title="数字频道",北京IPTV4K
http://192.168.1.2:35455/bptv/10000100000000050000000003887500.m3u8
#EXTINF:-1 tvg-name="萌宠TV" tvg-logo="https://live.fanmingming.com/tv/萌宠TV.png" group-title="数字频道",萌宠TV
http://192.168.1.2:35455/bptv/10000100000000050000000003887495.m3u8
#EXTINF:-1 tvg-name="淘BABY" tvg-logo="https://live.fanmingming.com/tv/淘BABY.png" group-title="数字频道",淘BABY
http://192.168.1.2:35455/bptv/10000100000000050000000003887496.m3u8
#EXTINF:-1 tvg-name="淘剧场" tvg-logo="https://live.fanmingming.com/tv/淘剧场.png" group-title="数字频道",淘剧场
http://192.168.1.2:35455/bptv/10000100000000050000000003887497.m3u8
#EXTINF:-1 tvg-name="淘电影" tvg-logo="https://live.fanmingming.com/tv/淘电影.png" group-title="数字频道",淘电影
http://192.168.1.2:35455/bptv/10000100000000050000000003887498.m3u8
#EXTINF:-1 tvg-name="淘娱乐" tvg-logo="https://live.fanmingming.com/tv/淘娱乐.png" group-title="数字频道",淘娱乐
http://192.168.1.2:35455/bptv/10000100000000050000000003887499.m3u8
#EXTINF:-1 tvg-name="北京体育休闲" tvg-logo="https://live.fanmingming.com/tv/北京体育休闲.png" group-title="数字频道",北京体育休闲
http://192.168.1.2:35455/bptv/10000100000000050000000003870779.m3u8
#EXTINF:-1 tvg-name="北京新闻" tvg-logo="https://live.fanmingming.com/tv/北京新闻.png" group-title="数字频道",北京新闻
http://192.168.1.2:35455/bptv/10000100000000050000000003870780.m3u8`;

        // 获取 URL 参数中的 IP 和端口，默认值分别为 192.168.1.2 和 35455
        const urlParams = new URLSearchParams(window.location.search);
        const ip = urlParams.get('ip') || '192.168.1.2';
        const port = urlParams.get('port') || '35455';

        // 设置输入框的值为 URL 参数中的 IP 和端口或默认值
        document.getElementById('ipInput').value = ip;
        document.getElementById('portInput').value = port;

        // 生成 M3U 内容，先替换 IP，再替换端口
        let result = baseM3uContent.replace(/192\.168\.1\.2/g, ip);
        result = result.replace(/35455/g, port);
        document.getElementById('result').textContent = result;
        document.querySelector('pre').setAttribute('style', 'white-space: pre-wrap;');

        // 生成下载链接
        const blob = new Blob([result], { type: 'audio/x-mpegurl' });
        const url = URL.createObjectURL(blob);
        const downloadLink = document.getElementById('downloadLink');
        downloadLink.href = url;
        downloadLink.style.display = 'inline';

        // 复制功能
        function copyToClipboard() {
            const text = document.getElementById('result').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('已复制到剪贴板！');
            }).catch(err => {
                console.error('复制失败: ', err);
            });
        }

        // 提交 IP 和端口并跳转
        function submitIpAndPort() {
            const ipInput = document.getElementById('ipInput').value.trim();
            const portInput = document.getElementById('portInput').value.trim();
            if (ipInput && portInput) {
                window.location.href = `${window.location.pathname}?ip=${encodeURIComponent(ipInput)}&port=${encodeURIComponent(portInput)}`;
            } else {
                alert('请输入有效的 IP 地址和端口号！');
            }
        }
    </script>
</body>
</html>
